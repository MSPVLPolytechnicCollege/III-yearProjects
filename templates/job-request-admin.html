<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JOB REQUEST</title>
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&family=Lora:ital,wght@0,400..700;1,400..700&family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Pacifico&family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Playwrite+NL+Guides&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Satisfy&display=swap');
        *{
            margin: 0;
            padding: 0;
        }
        body{
            background-color: #f1f5f8;
            font-family: 'Roboto',sans-serif;
        }
       
        .big-box p{
            color: #005cd5;
            font-size: 26px;
            font-weight: 700;
            text-align: center;
            padding-top: 40px;  
        }
        table{
            align-items: center;
            text-align: center;
            margin-top: 30px;
        }
        table tr{
            font-size: 16px;
            font-family: 'Lato',sans-serif;
            font-weight: 500;

        }
        th,td{
           padding: 5px 5px;
        }
        table td:nth-child(14) a{
            color: white;
            border-radius: 10px;
            background:#0bc427;
            text-decoration:none;
            padding:5px 30px 5px 30px ;
        }
        table td:nth-child(14) a:hover{
            transition: 0.2s linear;
            background:#028916 ;
            transition: 0.2S ease;
        }
        
        table td:nth-child(15) a{
            color: white;
            border-radius: 10px;
            background:#e20303;
            text-decoration:none;
            padding:5px 30px 5px 30px ;
        }
        table td:nth-child(15) a:hover{
            transition: 0.2s linear;
            background:#ff0000 ;
            transition: 0.2S ease;
        }
        table{
            margin-left:115px;
	        width:80%;
	        border-collapse:collapse;
	        margin-top:25px;
        }
        tr td,tr th{
	        border:1px solid #4682B4;
	        padding:5px;
        }
        tr th{
            border:none;
            background:#007BFF;
            border:1px solid #4682B4;
            color:white;
        }
        .icon a{
            margin-left:1520px;
            padding-top:20px;
            font-size:32px;
            text-decoration:none;
            font-weight:700px;
            color: black;
        }
        .icon a:hover{
            transition:0.2s ease;
            color:#005cd5;
        }
    </style>
</head>
<body>
    {% if messages %}
            {% for message in messages %}
            {{message}}
        {% endfor %}
    {% endif %}
    <form action="/request_job_show" method="post">
        <div class="course">
            <div class="icon">
                <a href="{{url_for('admin_dashboard')}}"><ion-icon name="close-outline"></ion-icon></a>
            </div>
            
            <div class="big-box">
                <p>JOB REQUEST FROM ALUMNI</p>
                <div class="data">
                    <table>
                        <tr>
                            <th>Sno</th>
                            <th>Company Name</th>
                            <th>Job Location</th>
                            <th>Job Title</th>
                            <th>Job Qualification</th>
                            <th>Description</th>
                            <th>Key Skill</th>
                            <th>Package</th>
                            <th>Job Experience</th>
                            <th>Vacancy</th>
                            <th>Job Email</th>
                            <th>Last Date</th>
                            <th>Contact</th>
                            <th>Accept</th>
                            <th>Delete</th>
                        </tr>
                        {% for data in datas %}
                        <tr>
                        <td>{{ data['sno'] }}</td>
                        <td>{{ data['company'] }}</td>
                        <td>{{ data['job_location'] }}</td>
                        <td>{{ data['job_title'] }}</td>
                        <td>{{ data['qualification'] }}</td>
                        <td>{{ data['description'] }}</td>
                        <td>{{ data['key_skills'] }}</td>
                        <td>{{ data['job_package'] }}</td>
                        <td>{{ data['experience'] }}</td>
                        <td>{{ data['num_vacancy'] }}</td>
                        <td>{{ data['reference_email'] }}</td>
                        <td>{{ data['last_date'] }}</td>
                        <td>{{data['contact']}}</td>
                        <td><a class='link3' onclick="saveData(this)" href="">Accept</a></td>
                        <td><a class='link3' onclick="return confirm('Are you sure to delete?');" href="{{url_for('deletejob',sno=data.sno)}}">Delete</a></td>
                        </tr>
                        {% endfor %}
                    </table>
                </div>
            </div>
        </div>
        <script>
            function saveData(element) {
                let row = element.closest("tr"); // Clicked button oda row eduthutom

                let data = {
                sno: row.cells[0].innerText,
                company: row.cells[1].innerText,
                job_location: row.cells[2].innerText,
                job_title: row.cells[3].innerText,
                qualification: row.cells[4].innerText,
                description: row.cells[5].innerText,
                key_skills: row.cells[6].innerText,
                job_package: row.cells[7].innerText,
                experience: row.cells[8].innerText,
                num_vacancy: row.cells[9].innerText,
                reference_email: row.cells[10].innerText,
                last_date: row.cells[11].innerText,
                contact: row.cells[12].innerText
            };

            fetch("http://127.0.0.1:5000/save_job", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(result => alert(result.message)) // Success message
            .catch(error => console.error("Error:", error));
}

        </script>
    </form>
</body>
</html>